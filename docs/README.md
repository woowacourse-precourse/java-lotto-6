# 3주차: 로또 - 구현할 기능 및 테스트 목록 정리

1. [구현할 기능 목록](#구현할_기능_목록)
2. [테스트 목록](#테스트_목록)

## 구현할 기능 목록
### 로또 발행 단계
#### 구입금액 입력
* `구입금액을 입력해주세요.` 메시지 출력
* 로또 구입 금액 입력
  * 구입 금액은 1000원 단위로 입력
  * 잘못된 입력일 경우 IllegalArgumentException 발생 후 에러 메시지 출력
    * 입력된 당첨 번호가 빈 문자열이면 잘못된 입력
    * 입력된 값을 정수로 변환할 수 없으면 잘못된 입력
    * 입력된 금액을 정수로 변환할 시 금액이 0 또는 음수이면 잘못된 입력
    * 입력한 금액이 1000원으로 나눠떨어지지 않으면 잘못된 입력
  * 에러메시지 출력 이후 구입 금액 입력을 다시 수행
    * 에러 메시지 형식: `[ERROR] (구체적인 에러 내용)`
* 유효성 검사를 모두 통과한 구입 금액은 아래 상황에서 활용
  * 발행할 로또의 개수 산출
  * 당첨 통계 출력 단계에서 로또 구매자의 수익률 산출

#### 발행한 로또 수량 및 번호 출력
* `n개를 구매했습니다.` 메시지 출력
  * n = 구매한 로또 수량, 천 단위마다 쉼표(,) 사용
* 구매한 로또 번호를 구매한 로또 개수만큼 출력
  * 로또 1개는 1~45 사이 임의의 숫자 6개로 이루어진 List
  * 로또 번호는 오름차순으로 정렬 후 출력
* 여러 개의 로또 번호를 저장하기 위한 List 사용, 즉 List의 List 사용

#### 당첨 번호 입력
* `당첨 번호를 입력해 주세요.` 메시지 출력
* 당첨 번호는 쉼표(,)를 기준으로 구분하여 입력

* 입력된 문자열 전체를 대상으로 1차 유효성 검사 실시
  * 입력된 당첨 번호가 빈 문자열이거나 공백문자가 사용되면 잘못된 입력
  * 입력된 당첨 번호에서 쉼표(,)를 아래와 같이 사용하면 잘못된 입력
    * 입력된 당첨 번호에서 쉼표(,)가 연속된 경우
    * 입력된 문자열의 처음이나 마지막이 쉼표(,)인 경우
  * 잘못된 입력일 경우 IllegalArgumentException 발생 후 에러 메시지 출력
    * 에러메시지 출력 이후 잘못된 입력이 발생한 지점부터 입력 재개
    * 에러 메시지 형식: `[ERROR] (구체적인 에러 내용)`

* 1차 유효성 검사 통과 후 쉼표(,)를 기준으로 입력받은 문자열 파싱

* 파싱된 문자열의 각 토큰별로 2차 유효성 검사 실시
  * 입력된 당첨 번호가 1~45 사이의 정수가 아니면 잘못된 입력
  * 입력된 당첨 번호 중 중복된 정수가 있으면 잘못된 입력
  * 입력된 당첨 번호가 6개가 아니면 잘못된 입력
  * 잘못된 입력일 경우 IllegalArgumentException 발생 후 에러 메시지 출력
    * 에러메시지 출력 이후 당첨 번호 입력을 처음부터 다시 수행
    * 에러 메시지 형식: `[ERROR] (구체적인 에러 내용)`

* 2차 유효성 검사까지 통과했을 경우 입력된 당첨번호를 List에 저장 후 오름차순 정렬

#### 보너스 번호 입력
* `보너스 번호를 입력해 주세요.` 메시지 출력
  * 잘못된 입력일 경우 IllegalArgumentException 발생 후 에러 메시지 출력
    * 입력된 보너스 번호가 빈 문자열이거나 공백문자를 사용하면 잘못된 입력
    * 입력된 보너스 번호를 정수로 변환할 수 없으면 잘못된 입력
    * 입력된 보너스 번호가 1~45 사이 정수가 아니면 잘못된 입력
    * 입력된 보너스 번호가 6개의 당첨 번호 중 하나와 중복되면 잘못된 입력
  * 에러메시지 출력 이후 잘못된 입력이 발생한 지점부터 입력 재개
    * 에러 메시지 형식: `[ERROR] (구체적인 에러 내용)`
  * 보너스 번호는 변수로 따로 저장


### 로또 당첨 등수 확인 단계
#### 각 로또별 당첨 여부 확인하기
* 발행받은 각각의 로또를 이전에 입력한 당첨 번호 & 보너스 번호와 비교
  * 발행된 로또와 당첨 번호 간 서로 일치하는 숫자의 개수 확인
  * 일치하는 숫자가 5개인 경우 보너스 번호까지 비교
* 발행받은 로또마다 당첨 등수를 나타내는 enum을 저장
 
* 당첨 등수 및 당첨금 산정 기준: enum 활용
  * 당첨 번호와 일치하는 번호의 개수, 보너스 번호와의 일치 여부로 결정
  * 지정된 기준에 따라 아래와 같이 당첨금을 차등 부여
    * 1등: 6개 번호 일치, 2,000,000,000원
    * 2등: 5개 번호 + 보너스 번호 일치, 30,000,000원
    * 3등: 5개 번호 일치, 1,500,000원
    * 4등: 4개 번호 일치, 50,000원
    * 5등: 3개 번호 일치, 5,000원
    * 6등: 3개 미만 일치, 0원

#### 당첨금과 당첨된 로또 개수 구하기
* 당첨 등수별 로또 개수에 관한 Map<Enum, Integer> 활용
  * key: 해당 로또의 순위, enum 사용
  * value: 각각의 당첨금을 받게 될 로또의 개수(초기값은 0), 초기값은 0

#### 지급할 당첨금의 총합 계산하기
* (당첨금 * 당첨된 로또 개수)의 총합 = 지급할 당첨금의 총합
* 계산한 당첨금의 총합은 long 타입으로 저장


### 당첨 통계 출력 단계
#### 당첨된 로또 개수를 등수별로 출력
* `당첨 통계\n---` 메시지 출력
* 각 등수별로 `n개 일치 (m원) - k개`의 형식으로 출력
  * n = 로또 1개당 일치하는 숫자 개수
  * m = 당첨 시 지급 금액, 출력 시 천 단위로 쉼표(,) 사용
  * k = 당첨금을 지급받을 수 있는 로또의 개수, 천 단위마다 쉼표(,) 사용
* 일치하는 숫자가 5개이면서 보너스 숫자가 일치하는 경우
  * `5개 일치, 보너스 볼 일치 (30,000,000원) - 0개`로 출력
* 당첨 통계 출력 시 6등은 출력하지 않음

#### 수익률 출력
* `총 수익률은 n%입니다.`의 형식으로 출력
* 수익률은 로또 구매 금액 대비 지급될 당첨금의 총액을 의미(백분율로 표현)
* 수익률은 천 단위마다 쉼표(,)로 구분
* 소수점 이하 첫째자리까지만 출력하되, 0인 경우애도 출력되어야 함

---

## 테스트 목록
### view 패키지 관련
#### 입력 기능
* 빈 문자열 혹은 공백문자가 사용된 문자열 입력 시, 에러 메시지 출력 여부 확인
* 유효한 입력이면 에러메시지 없이 입력한 값을 문자열로 반환하는지 확인
* 당첨 번호를 입력하는 경우 아래 테스트를 추가 실행
  * 잘못된 쉼표가 사용된 문자열 입력 시 에러 메시지 출력 여부 확인

#### 출력 기능 관련 테스트
* 발행한 로또 수량의 출력 형식 테스트
  * 로또 수량 출력 시 천 단위마다 콤마(,)가 사용되는지 확인

* 1개의 로또 번호 출력 형식 테스트
  * (예시): `[8, 21, 23, 41, 42, 43]`
    * 로또 번호 1개 출력 시 `[`로 시작, `]`로 종료 후 개행처리
    * 숫자는 오름차순으로 정렬된 상태
    * 숫자와 숫자 사이는 `, `로 구분

* 각 당첨등수별 당첨된 로또 개수 출력 형식 테스트
  * 2등인 경우에는 `5개 일치, 보너스 볼 일치 (30,000,000원) - 0개`와 같은 문자열 형식인지 확인
  * 나머지 등수의 경우 `n개 일치 (m원) - k개`와 같은 문자열 형식인지 확인
  * 6등인 경우는 출력 대상이 아니므로 테스트 대상에서 제외

* 총 수익률 출력 형식 테스트
  * 수익률 출력 시 정수 부분은 천 단위마다 콤마(,)가 사용되는지 확인
  * 소수점 이하 첫째자리가 0이어도 출력되는지 확인


### util 패키지 관련  
#### 유효성 검사 기능
* 각각의 유효성 검사 메소드가 의도대로 실행되는지 확인
  * 문자열이 정수로 변환 가능하지 않으면 에러 메시지 출력
  * 변환된 정수가 양의 정수가 아니면 에러 메시지 출력
  * 변환된 양의 정수가 1000원으로 나누어떨어지지 않으면 에러 메시지 출력
  * 쉼표(,)가 입력된 문자열의 처음 또는 마지막에 오거나 연속으로 사용되면 에러 메시지 출력
  * 입력받은 로또 번호 또는 보너스 번호가 1~45 사이 숫자가 아니면 에러 메시지 출력
  * 로또 번호가 6개가 아니면 에러 메시지 출력
  * 6개의 로또 번호 중 서로 중복된 숫자가 존재하면 에러 메시지 출력
  * 보너스 번호가 6개의 당첨 번호 중 한 개와 중복되면 에러메시지 출력


### model 패키지 관련
#### 로또 구입 금액
* 설정한 테스트케이스가 유효성 검사를 모두 통과하는지에 관한 테스트 수행
  * 문자열이 정수로 변환 가능하지 않으면 에러 메시지 출력
  * 변환된 정수가 양의 정수가 아니면 에러 메시지 출력
  * 변환된 양의 정수가 1000원으로 나누어떨어지지 않으면 에러 메시지 출력

#### 당첨 숫자
* 설정한 테스트케이스가 아래의 유효성 검사를 모두 통과하는지 테스트
  * 문자열이 정수로 변환 가능하지 않으면 에러 메시지 출력
  * 변환된 정수가 양의 정수가 아니면 에러 메시지 출력
  * 입력받은 로또 번호 또는 보너스 번호가 1~45 사이 숫자가 아니면 에러 메시지 출력

#### 로또
* 객체 인스턴스 생성 시 유효성 검사 관련
  * 당첨번호에 관한 로또 객체 인스턴스를 대상으로 테스트 수행
    * 로또 번호가 6개가 아니면 에러 메시지 출력
    * 6개의 로또 번호 중 서로 중복된 숫자가 존재하면 에러 메시지 출력
* 로또 1장 발행 관련
  * 실제 로또번호 생성 시 오름차순 정렬되었는지 확인

#### 보너스 번호
* 보너스 번호에 관한 테스트케이스로 설정  
* 보너스 번호가 다음의 유효성 검사를 통과하는지 확인
  * 보너스 번호가 6개의 로또 번호 중 한 개와 중복되면 에러메시지 출력

#### 당첨 번호와 발행받은 로또 번호 비교
* 현재 로또와 당첨 번호의 숫자 비교 결과가 올바른지 확인
* 현재 로또가 2등 당첨 요건을 충족하면 true, 그 외의 경우 false가 되는지 테스트
* 각 등수별 당첨된 로또의 개수가 올바르게 산출되었는지 테스트


### controller 패키지 관련
#### 전체 진행 과정
* 입력된 구입 금액이 유효하면 정상 종료
* 입력된 당첨 번호가 유효하면 정상 종료
* 입력된 보너스 번호가 유효하면 정상 종료
* 수익률 계산 결과가 올바른지 확인


### constants 패키지 관련
#### 로또 당첨 등수
* 일치하는 숫자 개수와 2등 조건 달성 여부를 입력받아 올바른 당첨 등수를 구하는지 테스트
