# 📝 기능 명세서
- [x] 로또 구입 금액을 입력 받는다.
  - [x] 사용자로부터 구입 금액을 입력 받는다.
  - [x] 입력 받은 금액의 유효성을 검사 한다.
- [x] 로또 구매 개수를 판단 한다.
  - [x] 구입 금액에 따라 구매한 로또 개수를 계산 한다.
  - [x] 구매한 갯수를 사용자에게 안내 한다.
- [x] 구매한 개수만큼 로또를 자동으로 발행 한다.
  - [x] 로또 번호를 1개씩 생성한다.
    - [x] 각 로또 번호는 1부터 45 사이의 숫자 중 중복되지 않는 6개로 구성 한다.
    - [x] 발행된 번호는 오름차순으로 정렬하여 저장 한다.
  - [x] 발행된 번호를 사용자에게 안내 한다.
- [x] 당첨 번호를 입력 받는다.
  - [x] 사용자로부터 당첨 번호를 입력 받는다.
  - [x] 번호의 유효성을 검사 한다.
- [x] 보너스 번호를 입력 받는다.
  - [x] 사용자로부터 보너스 번호를 입력 받는다.
  - [x] 번호의 유효성을 검사 한다.
- [x] 당첨 번호를 확인 한다.
  - [x] 자동 번호들을 당첨 번호와 비교하여 일치하는 개수가 6,5,4,3인 것을 확인 한다.
- [x] 보너스 번호를 확인 한다.
  - [x] 당첨 번호 개수가 5인 번호 중, 보너스 번호가 있는 것을 확인 한다.
- [x] 당첨 결과를 결정 한다.
  - [x] 당첨 번호 개수와 보너스 번호 일치 여부를 기준으로 1등~5등을 결정 한다.
- [x] 수익률을 계산 한다.
  - [x] 당첨 결과에 따른 총 당첨 금액을 계산 한다.
  - [x] 총 수익률을 계산한다. (당첨 금액의 합계/구입 금액)*100
- [x] 당첨 통계를 출력 한다.
  - [x] 당첨 결과를 사용자에게 안내한다.
  - [x] 총 수익률을 사용자에게 안내한다.
    - [x] 수익률은 소수점 둘째 자리에서 반올림해서 보여준다.
- [x] 예외 상황 시 에러 문구를 출력해야 한다. 
  - [x] 에러 문구는 "[ERROR]"로 시작해야 한다. 
  - [x] 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
  - [x] 에러는 명확한 유형으로 처리한다.

---

# ⚙️ Structure

```java
└─lotto
        ├─constant
        ├─controller
        ├─exception
        │  ├─input
        │  └─model
        ├─model
        ├─service
        │  └─lotto
        │      └─generator
        └─view
        ├─input
        │  ├─parser
        │  └─validator
        ├─message
        └─output
```


## constant
- `LottoConfig`: 전역적으로 사용되는 상수 정의
- `LottoSymbol`: 전역적으로 사용되는 문자 정의
- `RankCategory`: 로또 등수 정보 Enum 정의


## controller 
- `LottoController`


## exception
#### input
- 입력 관련 구체적인 예외 정의
#### model
- 모델에서 비즈니스 로직을 판단할 때 사용할 예외 정의


## Model
- `LottoPurchaseAmount` : 구매 금액
- `LottoTicketCount` : 로또 구매 개수
- `Lotto` : 로또
- `LottoBundle` : 로또 묶음
- `WinningNumbers` : 정답 번호
- `BonusNumber` : 보너스 번호
- `LottoResult` : 결과 (1~5등 개수)
- `ProfitRate` : 수익률


## Service

- `LottoTicketService`
    1. 입력 → (구입 객체 만드는 메서드) → 구입 금액 객체
    2. 구입 금액 → (구입 금액을 티켓 수로 반환 하는 메서드) → 로또 티켓 수
    3. 로또 티켓 수 → (로또 객체를 만드는 메서드 → 로또 객체 1개 ) → n개의 로또 묶음

- `WinningNumberService`
    1. 입력 → (번호 6개로 정답 번호 객체를 만드는 메서드) → 정답 번호 객체
    2. 입력, 정답 번호 → (번호 1개로 보너스 번호 객체 만드는 메서드 ) → 보너스 번호 객체

- `LottoResultService`
    1. 로또 묶음, 정답 번호, 보너스 번호 → {로또 1개 → (정답 객체와 비교) → (보너스 객체와 비교)}* n → 로또 결과
    2. 로또 결과, 구입 금액 → (수익률 계산 메서드) → 수익률

#### Generator
- 로또는 자동 번호 생성과 수동 번호 생성이 가능
- 추상 클래스 `TicketGenerator`를 `AutoTicketGenerator`가 구현



## View

#### input
- 입력 및 검증
#### output
- 포맷팅 및 출력
#### message 
- 출력 및 에러에서 사용할 문구 정의


---

# 🔎 Validation Check
### PurchaseAmount

1. view에서의 검증✔️
    - 값이 있어야 한다.✔️
    - 정수를 입력 받아야 한다.✔️
2. model에서의 검증✔️
    - 양의 정수여야 한다.✔️
    - 1000원 단위여야 한다.✔️

### Lotto

1. model에서의 검증✔️
    - 숫자 범위가 1~45여야 한다.✔️
    - 중복이 없어야 한다.✔️
    - 6자리다.✔️

### LottoBundle

1. model에서의 검증✔️
    - null이 아니여야 한다.✔️
    - 비어있지 않아야 한다.✔️

### WinningNumbers

1. view에서의 검증✔️
    - 입력이 있어야 한다.✔️
    - 정수들 사이가 전부 쉼표로 구분되어 있어야 한다.✔️
    - 쉼표 이외의 다른 문자가 있으면 안된다.✔️
    - 쉼표로 구분된 수들은 정수(실수x)여야 한다.✔️
2. model에서의 검증✔️
    - 숫자 범위가 1~45여야 한다.✔️
    - 중복이 없어야 한다.✔️
    - 6자리다.✔️

### BonusNumber

1. view에서의 검증✔️
    - 입력 값이 있어야 한다.✔️
    - 정수를 입력 받아야 한다.✔️
    - winningNumbers와 중복된 숫자가 없어야 한다.✔️
2. model에서의 검증✔️
    - 숫자 범위가 1~45여야 한다.✔️


---

# 💡 고민할 부분 / 리펙토링 사항

- [x] **추상화를 해야 할 부분은 어딜까? (추상 클래스, 인터페이스)**
  - [x] 로또 번호는 자동 번호와 수동 번호로 생성 가능하다. 
- [ ] 테스트 코드 리펙토링 하기
    - [x] @DisplayName으로 수정
    - [ ] 수익률 계산 테스트 케이스 추가
    - [ ] 입력 값 자동화